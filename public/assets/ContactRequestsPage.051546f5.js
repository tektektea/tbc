import{I as v,k,p as C,o as c,c as f,w as o,N as _,h as g,f as s,P as q,O as r,R as w,T as I,U as B,V as P,Q as S,i as u,L as p,g as b}from"./index.5244c262.js";import{Q as L,a as m}from"./QItem.cd13e0e4.js";import{Q}from"./QItemLabel.58e8c79a.js";import{Q as N}from"./QList.abd34aeb.js";import{Q as U}from"./QPagination.1ac5eefe.js";import{Q as M}from"./QPage.69d4d896.js";import{u as O}from"./use-quasar.525e2ea7.js";const T={class:"flex justify-between bg-white q-pa-md q-my-md"},$=g("p",{class:"title"},"Contact request",-1),j={class:"flex q-my-md"},K={setup(A){const i=O(),a=v({listData:{per_page:15,data:[],current_page:1,total:1}}),h=l=>d(l),D=k(()=>Math.ceil(a.listData.total/a.listData.per_page)),y=l=>{const{current_page:t,total:e,per_page:n,data:V}=l;a.listData.current_page=t,a.listData.data=V,a.listData.total=e,a.listData.per_page=n},x=l=>{i.dialog({title:"Confirm Delete",message:"Do you want to delete?",cancel:!0}).onOk(()=>{_.delete(`contact-request/${l.id}`).then(t=>{const{message:e}=t.data;i.notify({type:"positive",message:e}),d(1)})}).onCancel(()=>{}).onDismiss(()=>{})},d=l=>{_.get("contact-request/index",{params:l}).then(t=>{const{message:e,list:n}=t.data;y(n)}).catch(t=>{var e,n;return i.notify({type:"negative",message:((n=(e=t.response)==null?void 0:e.data)==null?void 0:n.message)||t.toString()})}).finally(()=>i.loading.hide())};return C(()=>d(1)),(l,t)=>(c(),f(M,null,{default:o(()=>[g("div",T,[$,s(w,{modelValue:r(a).search,"onUpdate:modelValue":t[0]||(t[0]=e=>r(a).search=e),outlined:"",rounded:"",dense:"",placeholder:"Search"},{append:o(()=>[s(q,{name:"search"})]),_:1},8,["modelValue"])]),s(N,{separator:"",class:"bg-white"},{default:o(()=>[(c(!0),I(P,null,B(r(a).listData.data,e=>(c(),f(L,{key:e.id},{default:o(()=>[s(m,{avatar:""},{default:o(()=>[s(S,{color:"primary","text-color":"text-white"},{default:o(()=>[u(p(e.name[0].toUpperCase()),1)]),_:2},1024)]),_:2},1024),s(m,null,{default:o(()=>[s(Q,null,{default:o(()=>[u(p(e.name),1)]),_:2},1024),s(Q,{caption:""},{default:o(()=>[u(p(e.message),1)]),_:2},1024)]),_:2},1024),s(m,{side:""},{default:o(()=>[s(b,{onClick:n=>x(e),round:"",color:"negative",icon:"delete"},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),g("div",j,[s(U,{"onUpdate:modelValue":[h,t[1]||(t[1]=e=>r(a).listData.current_page=e)],modelValue:r(a).listData.current_page,max:r(D),input:""},null,8,["modelValue","max"])])]),_:1}))}};export{K as default};
