import{I as k,k as S,p as V,o as p,c as m,w as l,S as g,h as i,f as s,g as _,X as q,Y as B,T as r,Z as C,Q as b,i as f,L as h}from"./index.17306579.js";import{a as I,Q as u}from"./QItemSection.6e21208d.js";import{Q}from"./QItemLabel.bb078423.js";import{Q as L}from"./QPagination.ef41f5a3.js";import{Q as N}from"./QList.7031be43.js";import{Q as P}from"./QPage.c6818e93.js";import{u as T}from"./use-quasar.64290232.js";const M=i("p",{class:"title"},"Testimonials",-1),$={class:"full-width flex items-center bg-white q-pa-md q-ma-md"},A=i("p",{class:"text-dark q-ma-md"},"Create a new testimonial",-1),E=["src"],F={class:"col-12"},J={setup(U){const d=T(),o=k({listData:{per_page:15,data:[],current_page:1,total:1}}),y=n=>{g.delete(`testimony/${n.id}`).then(t=>{const{message:a}=t.data;d.notify({type:"positive",message:a}),c(0)}).catch(t=>{var a,e;return d.notify({type:"negative",message:((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)||t.toString()})})},D=n=>c(n),v=S(()=>Math.ceil(o.listData.total/o.listData.per_page)),x=n=>{const{current_page:t,total:a,per_page:e,data:w}=n;o.listData.current_page=t,o.listData.data=w,o.listData.total=a,o.listData.per_page=e},c=n=>{g.get("testimony/index",{params:{page:n}}).then(t=>{const{message:a,list:e}=t.data;x(e)}).catch(t=>{var a,e;return d.notify({type:"negative",message:((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||t.toString()})}).finally(()=>d.loading.hide())};return V(()=>c(1)),(n,t)=>(p(),m(P,null,{default:l(()=>[M,i("div",$,[s(_,{to:{name:"testimonial:create"},rounded:"",label:"New Testimony",outline:"",color:"primary"}),A]),s(N,{separator:"",class:"bg-white full-width"},{default:l(()=>[(p(!0),q(C,null,B(r(o).listData.data,a=>(p(),m(I,{to:{name:"testimonial:detail",params:{id:a.id}},key:a.id},{default:l(()=>[s(u,{avatar:""},{default:l(()=>[s(b,null,{default:l(()=>[i("img",{style:{width:"90px"},src:a==null?void 0:a.image_url},null,8,E)]),_:2},1024)]),_:2},1024),s(u,null,{default:l(()=>[s(Q,null,{default:l(()=>[f(h(a==null?void 0:a.name),1)]),_:2},1024),s(Q,{caption:""},{default:l(()=>[f(h(a==null?void 0:a.quote),1)]),_:2},1024)]),_:2},1024),s(u,{side:""},{default:l(()=>[s(_,{round:"",onClick:e=>y(a),icon:"delete",color:"negative"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["to"]))),128)),i("div",F,[s(L,{"onUpdate:modelValue":[D,t[0]||(t[0]=a=>r(o).listData.current_page=a)],modelValue:r(o).listData.current_page,max:r(v),input:""},null,8,["modelValue","max"])])]),_:1})]),_:1}))}};export{J as default};
