import{I as k,k as b,p as S,o as p,c as g,w as n,S as f,h as d,f as e,g as m,X as V,Y as q,T as r,Z as B,Q as C,i as _,L as h,bc as I}from"./index.7b70c0b8.js";import{Q as L}from"./QImg.870387b3.js";import{a as N,Q as u}from"./QItemSection.63db971a.js";import{Q as v}from"./QItemLabel.79e6e03a.js";import{Q as P}from"./QPagination.791316ae.js";import{Q as E}from"./QList.b29beef7.js";import{Q as M}from"./QPage.ac60cf0c.js";import{u as T}from"./use-quasar.8c5294cc.js";const $=d("p",{class:"title"},"Events",-1),A={class:"full-width flex items-center bg-white q-pa-md q-ma-md"},F=d("p",{class:"text-dark q-ma-md"},"Create a new event",-1),U={class:"col-12"},O={setup(X){const i=T(),o=k({listData:{per_page:15,data:[],current_page:1,total:1}}),Q=l=>{f.delete(`event/${l.id}`).then(t=>{const{message:a}=t.data;i.notify({type:"positive",message:a}),c(0)}).catch(t=>{var a,s;return i.notify({type:"negative",message:((s=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:s.message)||t.toString()})})},D=l=>c(l),y=b(()=>Math.ceil(o.listData.total/o.listData.per_page)),w=l=>{const{current_page:t,total:a,per_page:s,data:x}=l;o.listData.current_page=t,o.listData.data=x,o.listData.total=a,o.listData.per_page=s},c=l=>{f.get("event/index",{params:{page:l}}).then(t=>{const{message:a,list:s}=t.data;w(s)}).catch(t=>{var a,s;return i.notify({type:"negative",message:((s=(a=t.response)==null?void 0:a.data)==null?void 0:s.message)||t.toString()})}).finally(()=>i.loading.hide())};return S(()=>c(1)),(l,t)=>(p(),g(M,null,{default:n(()=>[$,d("div",A,[e(m,{to:{name:"event:create"},rounded:"",label:"New Event",outline:"",color:"primary"}),F]),e(E,{separator:"",class:"bg-white full-width"},{default:n(()=>[(p(!0),V(B,null,q(r(o).listData.data,a=>(p(),g(N,{to:{name:"event:edit",params:{id:a.id}},key:a.id},{default:n(()=>[e(u,{avatar:""},{default:n(()=>[e(C,{square:""},{default:n(()=>[e(L,{style:{width:"210px"},src:a==null?void 0:a.thumbnail_path,"no-native-menu":""},null,8,["src"])]),_:2},1024)]),_:2},1024),e(u,null,{default:n(()=>[e(v,null,{default:n(()=>[_(h(a==null?void 0:a.title),1)]),_:2},1024),e(v,{caption:""},{default:n(()=>[_(h(a==null?void 0:a.description),1)]),_:2},1024)]),_:2},1024),e(u,{side:""},{default:n(()=>[e(m,{round:"",onClick:I(s=>Q(a),["self"]),icon:"delete",color:"negative"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["to"]))),128)),d("div",U,[e(P,{"onUpdate:modelValue":[D,t[0]||(t[0]=a=>r(o).listData.current_page=a)],modelValue:r(o).listData.current_page,max:r(y),input:""},null,8,["modelValue","max"])])]),_:1})]),_:1}))}};export{O as default};
