import{I as k,k as V,p as b,o as p,c as g,w as o,N as _,h as d,f as e,g as f,T as B,U as q,P as r,V as C,Q as I,i as m,L as h,aB as N}from"./index.67db5a7e.js";import{Q as P}from"./QImg.6d80a676.js";import{Q as S,a as u,b as v}from"./QItem.769291c6.js";import{Q as L}from"./QPagination.33bbc2f8.js";import{Q as E}from"./QList.27e51d53.js";import{Q as M}from"./QPage.4637a194.js";import{u as T}from"./use-quasar.71312e04.js";const U=d("p",{class:"title"},"Events",-1),$={class:"full-width flex items-center bg-white q-pa-md q-ma-md"},A=d("p",{class:"text-dark q-ma-md"},"Create a new event",-1),F={class:"col-12"},W={setup(j){const i=T(),n=k({listData:{per_page:15,data:[],current_page:1,total:1}}),Q=l=>{_.delete(`event/${l.id}`).then(t=>{const{message:a}=t.data;i.notify({type:"positive",message:a}),c(0)}).catch(t=>{var a,s;return i.notify({type:"negative",message:((s=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:s.message)||t.toString()})})},D=l=>c(l),y=V(()=>Math.ceil(n.listData.total/n.listData.per_page)),w=l=>{const{current_page:t,total:a,per_page:s,data:x}=l;n.listData.current_page=t,n.listData.data=x,n.listData.total=a,n.listData.per_page=s},c=l=>{_.get("event/index",{params:{page:l}}).then(t=>{const{message:a,list:s}=t.data;w(s)}).catch(t=>{var a,s;return i.notify({type:"negative",message:((s=(a=t.response)==null?void 0:a.data)==null?void 0:s.message)||t.toString()})}).finally(()=>i.loading.hide())};return b(()=>c(1)),(l,t)=>(p(),g(M,null,{default:o(()=>[U,d("div",$,[e(f,{to:{name:"event:create"},rounded:"",label:"New Event",outline:"",color:"primary"}),A]),e(E,{separator:"",class:"bg-white full-width"},{default:o(()=>[(p(!0),B(C,null,q(r(n).listData.data,a=>(p(),g(S,{to:{name:"event:edit",params:{id:a.id}},key:a.id},{default:o(()=>[e(u,{avatar:""},{default:o(()=>[e(I,{square:""},{default:o(()=>[e(P,{style:{width:"210px"},src:a==null?void 0:a.thumbnail_path,"no-native-menu":""},null,8,["src"])]),_:2},1024)]),_:2},1024),e(u,null,{default:o(()=>[e(v,null,{default:o(()=>[m(h(a==null?void 0:a.title),1)]),_:2},1024),e(v,{caption:""},{default:o(()=>[m(h(a==null?void 0:a.description),1)]),_:2},1024)]),_:2},1024),e(u,{side:""},{default:o(()=>[e(f,{round:"",onClick:N(s=>Q(a),["self"]),icon:"delete",color:"negative"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["to"]))),128)),d("div",F,[e(L,{"onUpdate:modelValue":[D,t[0]||(t[0]=a=>r(n).listData.current_page=a)],modelValue:r(n).listData.current_page,max:r(y),input:""},null,8,["modelValue","max"])])]),_:1})]),_:1}))}};export{W as default};
