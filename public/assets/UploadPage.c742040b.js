var W=Object.defineProperty,X=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var R=(e,a,i)=>a in e?W(e,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[a]=i,f=(e,a)=>{for(var i in a||(a={}))Z.call(a,i)&&R(e,i,a[i]);if(z)for(var i of z(a))ee.call(a,i)&&R(e,i,a[i]);return e},b=(e,a)=>X(e,Y(a));import{j as A,a4 as te,aD as ae,a5 as le,aE as ie,k as s,az as ne,aF as ue,u as O,l as r,U as F,aG as oe,ah as se,aH as ce,aI as de,aJ as re,aK as me,aL as fe,aM as ve,r as k,aN as ge,aO as be,aP as he,aQ as j,aR as ye,aS as xe,ap as Se,o as Ce,c as _e,w as V,f as x,aT as qe,g as Ve,h as L,i as Fe,S as ke}from"./index.d49de93d.js";import{Q as pe}from"./QForm.dfda63a1.js";import{Q as Be}from"./QPage.faa3a615.js";import{u as Ie}from"./use-quasar.4b809612.js";const Qe={xs:8,sm:10,md:14,lg:20,xl:24};var we=A({name:"QChip",props:b(f(f({},te),ae),{dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}}),emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:a,emit:i}){const{proxy:{$q:v}}=O(),h=le(e,v),o=ie(e,Qe),u=s(()=>e.selected===!0||e.icon!==void 0),d=s(()=>e.selected===!0?e.iconSelected||v.iconSet.chip.selected:e.icon),g=s(()=>e.iconRemove||v.iconSet.chip.remove),y=s(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),p=s(()=>{const l=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(l?` text-${l} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(y.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(h.value===!0?" q-chip--dark q-dark":"")}),S=s(()=>e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0});function B(l){l.keyCode===13&&C(l)}function C(l){e.disable||(i("update:selected",!e.selected),i("click",l))}function _(l){(l.keyCode===void 0||l.keyCode===13)&&(se(l),e.disable===!1&&(i("update:modelValue",!1),i("remove")))}function n(){const l=[];y.value===!0&&l.push(r("div",{class:"q-focus-helper"})),u.value===!0&&l.push(r(F,{class:"q-chip__icon q-chip__icon--left",name:d.value}));const I=e.label!==void 0?[r("div",{class:"ellipsis"},[e.label])]:void 0;return l.push(r("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},oe(a.default,I))),e.iconRight&&l.push(r(F,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&l.push(r(F,b(f({class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:g.value},S.value),{onClick:_,onKeyup:_}))),l}return()=>{if(e.modelValue===!1)return;const l={class:p.value,style:o.value};return y.value===!0&&Object.assign(l,S.value,{onClick:C,onKeyup:B}),ne("div",l,n(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[ue,e.ripple]])}}}),De=A({name:"QFile",inheritAttrs:!1,props:b(f(f(f({},ce),de),re),{modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]}),emits:[...me,...fe],setup(e,{slots:a,emit:i,attrs:v}){const{proxy:h}=O(),o=ve(),u=k(null),d=k(!1),g=ge(e),{pickFiles:y,onDragover:p,onDragleave:S,processFiles:B,getDndNode:C}=be({editable:o.editable,dnd:d,getFileInput:T,addFilesToQueue:P}),_=he(e),n=s(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),l=s(()=>j(n.value)),I=s(()=>n.value.map(t=>t.name).join(", ")),D=s(()=>ye(n.value.reduce((t,c)=>t+c.size,0))),U=s(()=>({totalSize:D.value,filesNumber:n.value.length,maxFiles:e.maxFiles})),$=s(()=>b(f({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:g.value},v),{id:o.targetUid.value,disabled:o.editable.value!==!0})),N=s(()=>e.multiple===!0&&e.append===!0);function Q(t){const c=n.value.slice();c.splice(t,1),w(c)}function K(t){const c=n.value.findIndex(t);c>-1&&Q(c)}function w(t){i("update:modelValue",e.multiple===!0?t:t[0])}function E(t){t.keyCode===13&&Se(t)}function M(t){(t.keyCode===13||t.keyCode===32)&&y(t)}function T(){return u.value}function P(t,c){const m=B(t,c,n.value,N.value);m!==void 0&&((e.multiple===!0?e.modelValue&&m.every(J=>n.value.includes(J)):e.modelValue===m[0])||w(N.value===!0?n.value.concat(m):m))}function q(){return[r("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function G(){if(a.file!==void 0)return n.value.length===0?q():n.value.map((c,m)=>a.file({index:m,file:c,ref:this}));if(a.selected!==void 0)return n.value.length===0?q():a.selected({files:n.value,ref:this});if(e.useChips===!0)return n.value.length===0?q():n.value.map((c,m)=>r(we,{key:"file-"+m,removable:o.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{Q(m)}},()=>r("span",{class:"ellipsis",textContent:c.name})));const t=e.displayValue!==void 0?e.displayValue:I.value;return t.length>0?[r("div",{class:e.inputClass,style:e.inputStyle,textContent:t})]:q()}function H(){const t=b(f(f({ref:u},$.value),_.value),{class:"q-field__input fit absolute-full cursor-pointer",onChange:P});return e.multiple===!0&&(t.multiple=!0),r("input",t)}return Object.assign(o,{fieldClass:{value:"q-file q-field--auto-height"},emitValue:w,hasValue:l,inputRef:u,innerValue:n,floatingLabel:s(()=>l.value===!0||j(e.displayValue)),computedCounter:s(()=>{if(e.counterLabel!==void 0)return e.counterLabel(U.value);const t=e.maxFiles;return`${n.value.length}${t!==void 0?" / "+t:""} (${D.value})`}),getControlChild:()=>C("file"),getControl:()=>{const t={ref:o.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return o.editable.value===!0&&Object.assign(t,{onDragover:p,onDragleave:S,onKeydown:E,onKeyup:M}),r("div",t,[H()].concat(G()))}}),Object.assign(h,{removeAtIndex:Q,removeFile:K,getNativeElement:()=>u.value}),xe(o)}});const Ne=L("h1",{class:"title"},"Upload Image",-1),Pe=Fe(" 4md is Maximum size of image "),ze=L("br",null,null,-1),Ue={setup(e){const a=Ie(),i=k(null),v=k(!1),h=()=>{a.loading.show();let o=new FormData;o.append("gallery_image",v.value),o.append("attachment",i.value),ke.post("media",o).then(u=>{const{message:d}=u.data;a.notify({type:"positive",message:d}),i.value=null}).catch(u=>{var d,g;return a.notify({type:"negative",message:((g=(d=u==null?void 0:u.response)==null?void 0:d.data)==null?void 0:g.message)||u.toString()})}).finally(()=>a.loading.hide())};return(o,u)=>(Ce(),_e(Be,null,{default:V(()=>[Ne,x(pe,{onSubmit:h,flat:"",class:"bg-white q-pa-md"},{default:V(()=>[x(De,{accept:"image/*","max-file-size":"4048576",filled:"","bottom-slots":"",modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=d=>i.value=d),label:"Upload Image"},{before:V(()=>[x(F,{name:"image"})]),hint:V(()=>[Pe]),_:1},8,["modelValue"]),x(qe,{modelValue:v.value,"onUpdate:modelValue":u[1]||(u[1]=d=>v.value=d),label:"Do you want to display in gallery?"},null,8,["modelValue"]),ze,x(Ve,{class:"q-mt-md",type:"submit",label:"Upload",color:"primary",icon:"send"})]),_:1})]),_:1}))}};export{Ue as default};
