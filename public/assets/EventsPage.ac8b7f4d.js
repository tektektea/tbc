import{I as k,k as V,p as b,o as p,c as g,w as n,N as f,h as d,f as e,g as m,T as q,U as B,O as r,V as C,Q as I,i as _,L as h,ba as N}from"./index.5244c262.js";import{Q as S}from"./QImg.d712e103.js";import{Q as L,a as u}from"./QItem.cd13e0e4.js";import{Q as v}from"./QItemLabel.58e8c79a.js";import{Q as P}from"./QPagination.1ac5eefe.js";import{Q as E}from"./QList.abd34aeb.js";import{Q as M}from"./QPage.69d4d896.js";import{u as T}from"./use-quasar.525e2ea7.js";const U=d("p",{class:"title"},"Events",-1),$={class:"full-width flex items-center bg-white q-pa-md q-ma-md"},A=d("p",{class:"text-dark q-ma-md"},"Create a new event",-1),F={class:"col-12"},X={setup(O){const i=T(),o=k({listData:{per_page:15,data:[],current_page:1,total:1}}),Q=l=>{f.delete(`event/${l.id}`).then(t=>{const{message:a}=t.data;i.notify({type:"positive",message:a}),c(0)}).catch(t=>{var a,s;return i.notify({type:"negative",message:((s=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:s.message)||t.toString()})})},D=l=>c(l),y=V(()=>Math.ceil(o.listData.total/o.listData.per_page)),w=l=>{const{current_page:t,total:a,per_page:s,data:x}=l;o.listData.current_page=t,o.listData.data=x,o.listData.total=a,o.listData.per_page=s},c=l=>{f.get("event/index",{params:{page:l}}).then(t=>{const{message:a,list:s}=t.data;w(s)}).catch(t=>{var a,s;return i.notify({type:"negative",message:((s=(a=t.response)==null?void 0:a.data)==null?void 0:s.message)||t.toString()})}).finally(()=>i.loading.hide())};return b(()=>c(1)),(l,t)=>(p(),g(M,null,{default:n(()=>[U,d("div",$,[e(m,{to:{name:"event:create"},rounded:"",label:"New Event",outline:"",color:"primary"}),A]),e(E,{separator:"",class:"bg-white full-width"},{default:n(()=>[(p(!0),q(C,null,B(r(o).listData.data,a=>(p(),g(L,{to:{name:"event:edit",params:{id:a.id}},key:a.id},{default:n(()=>[e(u,{avatar:""},{default:n(()=>[e(I,{square:""},{default:n(()=>[e(S,{style:{width:"210px"},src:a==null?void 0:a.thumbnail_path,"no-native-menu":""},null,8,["src"])]),_:2},1024)]),_:2},1024),e(u,null,{default:n(()=>[e(v,null,{default:n(()=>[_(h(a==null?void 0:a.title),1)]),_:2},1024),e(v,{caption:""},{default:n(()=>[_(h(a==null?void 0:a.description),1)]),_:2},1024)]),_:2},1024),e(u,{side:""},{default:n(()=>[e(m,{round:"",onClick:N(s=>Q(a),["self"]),icon:"delete",color:"negative"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["to"]))),128)),d("div",F,[e(P,{"onUpdate:modelValue":[D,t[0]||(t[0]=a=>r(o).listData.current_page=a)],modelValue:r(o).listData.current_page,max:r(y),input:""},null,8,["modelValue","max"])])]),_:1})]),_:1}))}};export{X as default};
