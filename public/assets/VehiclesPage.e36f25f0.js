import{I as k,k as C,p as V,o as u,c as w,w as c,N as _,h as o,f as l,O as b,P as d,R as q,g,T as h,U as S,V as B,W as f,L as p,X as M,Y as P}from"./index.3c048af8.js";import{Q as I}from"./QPagination.17b37c89.js";import{Q as L}from"./QPage.2000b5c5.js";import{u as N}from"./use-quasar.dd5c13cf.js";const U=o("p",{class:"title"},"Vehicles",-1),R={class:"flex justify-between bg-white q-pa-md q-my-md"},T={class:"row q-col-gutter-sm"},H=["src"],K={class:"text-h6"},O={class:"text-subtitle2"},$={class:"text-subtitle2"},j=["innerHTML"],A={class:"flex q-my-md"},z={setup(E){const r=N(),t=k({search:"",listData:{per_page:15,data:[],current_page:1,total:1}}),m=s=>i(s),v=C(()=>Math.ceil(t.listData.total/t.listData.per_page)),y=s=>{const{current_page:e,total:a,per_page:n,data:Q}=s;t.listData.current_page=e,t.listData.data=Q,t.listData.total=a,t.listData.per_page=n},D=s=>{r.dialog({title:"Confirm Delete",message:"Do you want to delete?",cancel:!0}).onOk(()=>{_.delete(`vehicle/${s.id}`).then(e=>{const{message:a}=e.data;r.notify({type:"positive",message:a}),i(1)})}).onCancel(()=>{}).onDismiss(()=>{})},x=s=>{s.keyCode===13&&i(1)},i=s=>{_.get("vehicle/index",{params:s,search:t.search}).then(e=>{const{message:a,list:n}=e.data;y(n)}).catch(e=>{var a,n;return r.notify({type:"negative",message:((n=(a=e.response)==null?void 0:a.data)==null?void 0:n.message)||e.toString()})}).finally(()=>r.loading.hide())};return V(()=>i(1)),(s,e)=>(u(),w(L,null,{default:c(()=>[U,o("div",R,[l(q,{onKeyup:x,modelValue:d(t).search,"onUpdate:modelValue":e[0]||(e[0]=a=>d(t).search=a),outlined:"",rounded:"",dense:"",placeholder:"Search"},{append:c(()=>[l(b,{name:"search"})]),_:1},8,["modelValue"]),l(g,{to:{name:"vehicle:create"},color:"primary",rounded:"",label:"New vehicle"})]),o("div",T,[(u(!0),h(B,null,S(d(t).listData.data,a=>(u(),h("div",{key:a.id},[l(P,{style:{padding:"0 !important"},flat:"",class:"tcard"},{default:c(()=>[o("img",{src:a==null?void 0:a.image_url},null,8,H),l(f,null,{default:c(()=>[o("div",K,p(a==null?void 0:a.name),1),o("div",O,"KM Rate: "+p(a==null?void 0:a.km_rate),1),o("div",$,"DUty Rate : "+p(a==null?void 0:a.duty_rate),1)]),_:2},1024),l(f,{class:"q-pt-none"},{default:c(()=>[o("div",{innerHTML:a.description},null,8,j)]),_:2},1024),l(M,null,{default:c(()=>[l(g,{onClick:n=>D(a),label:"Delete",color:"negative",flat:""},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))]),o("div",A,[l(I,{"onUpdate:modelValue":[m,e[1]||(e[1]=a=>d(t).listData.current_page=a)],modelValue:d(t).listData.current_page,max:d(v),input:""},null,8,["modelValue","max"])])]),_:1}))}};export{z as default};
