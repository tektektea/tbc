var W=Object.defineProperty,X=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var P=(e,a,i)=>a in e?W(e,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[a]=i,v=(e,a)=>{for(var i in a||(a={}))Z.call(a,i)&&P(e,i,a[i]);if(A)for(var i of A(a))ee.call(a,i)&&P(e,i,a[i]);return e},b=(e,a)=>X(e,Y(a));import{j as R,a0 as te,al as ae,a1 as le,am as ie,k as s,an as ne,u as O,l as r,O as F,ao as ue,ap as oe,ag as se,aq as ce,ar as de,as as re,at as me,au as ve,av as fe,r as k,aw as ge,ax as be,ay as he,az as j,aA as ye,aB as xe,aC as Ce,o as Se,c as _e,w as V,f as x,aD as qe,g as Ve,h as L,i as Fe,N as ke}from"./index.3c048af8.js";import{Q as pe}from"./QForm.240eedb0.js";import{Q as Be}from"./QPage.2000b5c5.js";import{u as we}from"./use-quasar.dd5c13cf.js";const Ie={xs:8,sm:10,md:14,lg:20,xl:24};var Qe=R({name:"QChip",props:b(v(v({},te),ae),{dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}}),emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:a,emit:i}){const{proxy:{$q:f}}=O(),h=le(e,f),o=ie(e,Ie),u=s(()=>e.selected===!0||e.icon!==void 0),d=s(()=>e.selected===!0?e.iconSelected||f.iconSet.chip.selected:e.icon),g=s(()=>e.iconRemove||f.iconSet.chip.remove),y=s(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),p=s(()=>{const l=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(l?` text-${l} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(y.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(h.value===!0?" q-chip--dark q-dark":"")}),C=s(()=>e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0});function B(l){l.keyCode===13&&S(l)}function S(l){e.disable||(i("update:selected",!e.selected),i("click",l))}function _(l){(l.keyCode===void 0||l.keyCode===13)&&(se(l),e.disable===!1&&(i("update:modelValue",!1),i("remove")))}function n(){const l=[];y.value===!0&&l.push(r("div",{class:"q-focus-helper"})),u.value===!0&&l.push(r(F,{class:"q-chip__icon q-chip__icon--left",name:d.value}));const w=e.label!==void 0?[r("div",{class:"ellipsis"},[e.label])]:void 0;return l.push(r("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},ue(a.default,w))),e.iconRight&&l.push(r(F,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&l.push(r(F,b(v({class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:g.value},C.value),{onClick:_,onKeyup:_}))),l}return()=>{if(e.modelValue===!1)return;const l={class:p.value,style:o.value};return y.value===!0&&Object.assign(l,C.value,{onClick:S,onKeyup:B}),ne("div",l,n(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[oe,e.ripple]])}}}),De=R({name:"QFile",inheritAttrs:!1,props:b(v(v(v({},ce),de),re),{modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]}),emits:[...me,...ve],setup(e,{slots:a,emit:i,attrs:f}){const{proxy:h}=O(),o=fe(),u=k(null),d=k(!1),g=ge(e),{pickFiles:y,onDragover:p,onDragleave:C,processFiles:B,getDndNode:S}=be({editable:o.editable,dnd:d,getFileInput:T,addFilesToQueue:z}),_=he(e),n=s(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),l=s(()=>j(n.value)),w=s(()=>n.value.map(t=>t.name).join(", ")),D=s(()=>ye(n.value.reduce((t,c)=>t+c.size,0))),U=s(()=>({totalSize:D.value,filesNumber:n.value.length,maxFiles:e.maxFiles})),$=s(()=>b(v({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:g.value},f),{id:o.targetUid.value,disabled:o.editable.value!==!0})),N=s(()=>e.multiple===!0&&e.append===!0);function I(t){const c=n.value.slice();c.splice(t,1),Q(c)}function K(t){const c=n.value.findIndex(t);c>-1&&I(c)}function Q(t){i("update:modelValue",e.multiple===!0?t:t[0])}function E(t){t.keyCode===13&&Ce(t)}function M(t){(t.keyCode===13||t.keyCode===32)&&y(t)}function T(){return u.value}function z(t,c){const m=B(t,c,n.value,N.value);m!==void 0&&((e.multiple===!0?e.modelValue&&m.every(J=>n.value.includes(J)):e.modelValue===m[0])||Q(N.value===!0?n.value.concat(m):m))}function q(){return[r("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function G(){if(a.file!==void 0)return n.value.length===0?q():n.value.map((c,m)=>a.file({index:m,file:c,ref:this}));if(a.selected!==void 0)return n.value.length===0?q():a.selected({files:n.value,ref:this});if(e.useChips===!0)return n.value.length===0?q():n.value.map((c,m)=>r(Qe,{key:"file-"+m,removable:o.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{I(m)}},()=>r("span",{class:"ellipsis",textContent:c.name})));const t=e.displayValue!==void 0?e.displayValue:w.value;return t.length>0?[r("div",{class:e.inputClass,style:e.inputStyle,textContent:t})]:q()}function H(){const t=b(v(v({ref:u},$.value),_.value),{class:"q-field__input fit absolute-full cursor-pointer",onChange:z});return e.multiple===!0&&(t.multiple=!0),r("input",t)}return Object.assign(o,{fieldClass:{value:"q-file q-field--auto-height"},emitValue:Q,hasValue:l,inputRef:u,innerValue:n,floatingLabel:s(()=>l.value===!0||j(e.displayValue)),computedCounter:s(()=>{if(e.counterLabel!==void 0)return e.counterLabel(U.value);const t=e.maxFiles;return`${n.value.length}${t!==void 0?" / "+t:""} (${D.value})`}),getControlChild:()=>S("file"),getControl:()=>{const t={ref:o.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return o.editable.value===!0&&Object.assign(t,{onDragover:p,onDragleave:C,onKeydown:E,onKeyup:M}),r("div",t,[H()].concat(G()))}}),Object.assign(h,{removeAtIndex:I,removeFile:K,getNativeElement:()=>u.value}),xe(o)}});const Ne=L("h1",{class:"title"},"Upload Image",-1),ze=Fe(" 4md is Maximum size of image "),Ae=L("br",null,null,-1),Ue={setup(e){const a=we(),i=k(null),f=k(!1),h=()=>{a.loading.show();let o=new FormData;o.append("gallery_image",f.value),o.append("attachment",i.value),ke.post("media",o).then(u=>{const{message:d}=u.data;a.notify({type:"positive",message:d}),i.value=null}).catch(u=>{var d,g;return a.notify({type:"negative",message:((g=(d=u==null?void 0:u.response)==null?void 0:d.data)==null?void 0:g.message)||u.toString()})}).finally(()=>a.loading.hide())};return(o,u)=>(Se(),_e(Be,null,{default:V(()=>[Ne,x(pe,{onSubmit:h,flat:"",class:"bg-white q-pa-md"},{default:V(()=>[x(De,{accept:"image/*","max-file-size":"4048576",filled:"","bottom-slots":"",modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=d=>i.value=d),label:"Upload Image"},{before:V(()=>[x(F,{name:"image"})]),hint:V(()=>[ze]),_:1},8,["modelValue"]),x(qe,{modelValue:f.value,"onUpdate:modelValue":u[1]||(u[1]=d=>f.value=d),label:"Do you want to display in gallery?"},null,8,["modelValue"]),Ae,x(Ve,{class:"q-mt-md",type:"submit",label:"Upload",color:"primary",icon:"send"})]),_:1})]),_:1}))}};export{Ue as default};
