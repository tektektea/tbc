var H=Object.defineProperty,J=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var Q=(e,a,i)=>a in e?H(e,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[a]=i,m=(e,a)=>{for(var i in a||(a={}))X.call(a,i)&&Q(e,i,a[i]);if(P)for(var i of P(a))Z.call(a,i)&&Q(e,i,a[i]);return e},h=(e,a)=>J(e,W(a));import{j as R,a0 as ee,aj as te,a1 as ae,ak as le,k as o,al as ie,u as O,l as d,O as k,am as ne,an as ue,ae as oe,ao as se,ap as ce,aq as de,ar as re,as as me,at as fe,r as N,au as ve,av as ge,aw as he,ax as D,ay as be,az as ye,aA as xe,o as Ce,c as Se,w as y,f as _,g as qe,Y as _e,h as ke,i as Fe,N as Ve}from"./index.67db5a7e.js";import{Q as pe}from"./QPage.4637a194.js";import{u as Be}from"./use-quasar.71312e04.js";const Ie={xs:8,sm:10,md:14,lg:20,xl:24};var we=R({name:"QChip",props:h(m(m({},ee),te),{dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}}),emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:a,emit:i}){const{proxy:{$q:f}}=O(),v=ae(e,f),n=le(e,Ie),s=o(()=>e.selected===!0||e.icon!==void 0),g=o(()=>e.selected===!0?e.iconSelected||f.iconSet.chip.selected:e.icon),F=o(()=>e.iconRemove||f.iconSet.chip.remove),b=o(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),V=o(()=>{const l=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(l?` text-${l} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(b.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(v.value===!0?" q-chip--dark q-dark":"")}),x=o(()=>e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0});function p(l){l.keyCode===13&&C(l)}function C(l){e.disable||(i("update:selected",!e.selected),i("click",l))}function S(l){(l.keyCode===void 0||l.keyCode===13)&&(oe(l),e.disable===!1&&(i("update:modelValue",!1),i("remove")))}function u(){const l=[];b.value===!0&&l.push(d("div",{class:"q-focus-helper"})),s.value===!0&&l.push(d(k,{class:"q-chip__icon q-chip__icon--left",name:g.value}));const B=e.label!==void 0?[d("div",{class:"ellipsis"},[e.label])]:void 0;return l.push(d("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},ne(a.default,B))),e.iconRight&&l.push(d(k,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&l.push(d(k,h(m({class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:F.value},x.value),{onClick:S,onKeyup:S}))),l}return()=>{if(e.modelValue===!1)return;const l={class:V.value,style:n.value};return b.value===!0&&Object.assign(l,x.value,{onClick:C,onKeyup:p}),ie("div",l,u(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[ue,e.ripple]])}}}),Ne=R({name:"QFile",inheritAttrs:!1,props:h(m(m(m({},se),ce),de),{modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]}),emits:[...re,...me],setup(e,{slots:a,emit:i,attrs:f}){const{proxy:v}=O(),n=fe(),s=N(null),g=N(!1),F=ve(e),{pickFiles:b,onDragover:V,onDragleave:x,processFiles:p,getDndNode:C}=ge({editable:n.editable,dnd:g,getFileInput:M,addFilesToQueue:A}),S=he(e),u=o(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),l=o(()=>D(u.value)),B=o(()=>u.value.map(t=>t.name).join(", ")),j=o(()=>be(u.value.reduce((t,c)=>t+c.size,0))),L=o(()=>({totalSize:j.value,filesNumber:u.value.length,maxFiles:e.maxFiles})),$=o(()=>h(m({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:F.value},f),{id:n.targetUid.value,disabled:n.editable.value!==!0})),z=o(()=>e.multiple===!0&&e.append===!0);function I(t){const c=u.value.slice();c.splice(t,1),w(c)}function U(t){const c=u.value.findIndex(t);c>-1&&I(c)}function w(t){i("update:modelValue",e.multiple===!0?t:t[0])}function K(t){t.keyCode===13&&xe(t)}function E(t){(t.keyCode===13||t.keyCode===32)&&b(t)}function M(){return s.value}function A(t,c){const r=p(t,c,u.value,z.value);r!==void 0&&((e.multiple===!0?e.modelValue&&r.every(G=>u.value.includes(G)):e.modelValue===r[0])||w(z.value===!0?u.value.concat(r):r))}function q(){return[d("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function T(){if(a.file!==void 0)return u.value.length===0?q():u.value.map((c,r)=>a.file({index:r,file:c,ref:this}));if(a.selected!==void 0)return u.value.length===0?q():a.selected({files:u.value,ref:this});if(e.useChips===!0)return u.value.length===0?q():u.value.map((c,r)=>d(we,{key:"file-"+r,removable:n.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{I(r)}},()=>d("span",{class:"ellipsis",textContent:c.name})));const t=e.displayValue!==void 0?e.displayValue:B.value;return t.length>0?[d("div",{class:e.inputClass,style:e.inputStyle,textContent:t})]:q()}function Y(){const t=h(m(m({ref:s},$.value),S.value),{class:"q-field__input fit absolute-full cursor-pointer",onChange:A});return e.multiple===!0&&(t.multiple=!0),d("input",t)}return Object.assign(n,{fieldClass:{value:"q-file q-field--auto-height"},emitValue:w,hasValue:l,inputRef:s,innerValue:u,floatingLabel:o(()=>l.value===!0||D(e.displayValue)),computedCounter:o(()=>{if(e.counterLabel!==void 0)return e.counterLabel(L.value);const t=e.maxFiles;return`${u.value.length}${t!==void 0?" / "+t:""} (${j.value})`}),getControlChild:()=>C("file"),getControl:()=>{const t={ref:n.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return n.editable.value===!0&&Object.assign(t,{onDragover:V,onDragleave:x,onKeydown:K,onKeyup:E}),d("div",t,[Y()].concat(T()))}}),Object.assign(v,{removeAtIndex:I,removeFile:U,getNativeElement:()=>s.value}),ye(n)}});const je=ke("h1",{class:"title"},"Upload Image",-1),ze=Fe(" 4md is Maximum size of image "),Re={setup(e){const a=Be(),i=N(null),f=()=>{a.loading.show();let v=new FormData;v.append("attachment",i.value),Ve.post("media",v).then(n=>{const{message:s}=n.data;a.notify({type:"positive",message:s}),i.value=null}).catch(n=>{var s,g;return a.notify({type:"negative",message:((g=(s=n==null?void 0:n.response)==null?void 0:s.data)==null?void 0:g.message)||n.toString()})}).finally(()=>a.loading.hide())};return(v,n)=>(Ce(),Se(pe,null,{default:y(()=>[je,_(_e,{flat:"",class:"bg-white q-pa-md"},{default:y(()=>[_(Ne,{accept:"image/*","max-file-size":"4048576",filled:"","bottom-slots":"",modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=s=>i.value=s),label:"Upload Image"},{before:y(()=>[_(k,{name:"image"})]),hint:y(()=>[ze]),append:y(()=>[_(qe,{label:"Upload",color:"primary",icon:"send",onClick:f})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}};export{Re as default};
