import{J as k,k as b,q,o as p,c as g,w as n,T as f,h as d,f as e,g as m,Y as V,Z as B,U as r,$ as C,Q as S,i as _,M as h,bd as I}from"./index.bad63095.js";import{Q as M}from"./QImg.96f02e70.js";import{a as N,Q as u}from"./QItemSection.5d54dfbc.js";import{Q as v}from"./QItemLabel.caa23266.js";import{Q as P}from"./QPagination.9b9322b3.js";import{Q as E}from"./QList.36c41dac.js";import{Q as L}from"./QPage.18b38c29.js";import{u as $}from"./use-quasar.e471b983.js";const T=d("p",{class:"title"},"Events",-1),U={class:"full-width flex items-center bg-white q-pa-md q-ma-md"},A=d("p",{class:"text-dark q-ma-md"},"Create a new event",-1),F={class:"col-12"},R={setup(J){const i=$(),o=k({listData:{per_page:15,data:[],current_page:1,total:1}}),Q=l=>{f.delete(`event/${l.id}`).then(t=>{const{message:a}=t.data;i.notify({type:"positive",message:a}),c(0)}).catch(t=>{var a,s;return i.notify({type:"negative",message:((s=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:s.message)||t.toString()})})},D=l=>c(l),y=b(()=>Math.ceil(o.listData.total/o.listData.per_page)),w=l=>{const{current_page:t,total:a,per_page:s,data:x}=l;o.listData.current_page=t,o.listData.data=x,o.listData.total=a,o.listData.per_page=s},c=l=>{f.get("event/index",{params:{page:l}}).then(t=>{const{message:a,list:s}=t.data;w(s)}).catch(t=>{var a,s;return i.notify({type:"negative",message:((s=(a=t.response)==null?void 0:a.data)==null?void 0:s.message)||t.toString()})}).finally(()=>i.loading.hide())};return q(()=>c(1)),(l,t)=>(p(),g(L,null,{default:n(()=>[T,d("div",U,[e(m,{to:{name:"event:create"},rounded:"",label:"New Event",outline:"",color:"primary"}),A]),e(E,{separator:"",class:"bg-white full-width"},{default:n(()=>[(p(!0),V(C,null,B(r(o).listData.data,a=>(p(),g(N,{to:{name:"event:edit",params:{id:a.id}},key:a.id},{default:n(()=>[e(u,{avatar:""},{default:n(()=>[e(S,{square:""},{default:n(()=>[e(M,{style:{width:"210px"},src:a==null?void 0:a.thumbnail_path,"no-native-menu":""},null,8,["src"])]),_:2},1024)]),_:2},1024),e(u,null,{default:n(()=>[e(v,null,{default:n(()=>[_(h(a==null?void 0:a.title),1)]),_:2},1024),e(v,{caption:""},{default:n(()=>[_(h(a==null?void 0:a.description),1)]),_:2},1024)]),_:2},1024),e(u,{side:""},{default:n(()=>[e(m,{round:"",onClick:I(s=>Q(a),["self"]),icon:"delete",color:"negative"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["to"]))),128)),d("div",F,[e(P,{"onUpdate:modelValue":[D,t[0]||(t[0]=a=>r(o).listData.current_page=a)],modelValue:r(o).listData.current_page,max:r(y),input:""},null,8,["modelValue","max"])])]),_:1})]),_:1}))}};export{R as default};
