import{I as y,k as x,p as k,o as p,c as Q,w as r,S as u,h as l,f as i,g,X as m,Y as B,T as c,Z as C,L as S}from"./index.4d63b74e.js";import{Q as V}from"./QImg.8f56f688.js";import{Q as b}from"./QPagination.fb102c48.js";import{Q as w}from"./QPage.12b83cb2.js";import{u as I}from"./use-quasar.4d0d1f1f.js";const P=l("h1",{class:"title"},"Media",-1),q={class:"q-col-gutter-md row items-start"},M={class:"col-12 flex items-center bg-white"},L=l("p",{class:"text-dark q-ma-md"},"Click here to upload image",-1),N={class:"col-12"},Y={setup(U){const n=I(),s=y({listData:{per_page:15,data:[],current_page:1,total:1}}),_=o=>{u.delete(`media/${o.id}`).then(t=>{const{message:a}=t.data;n.notify({type:"positive",message:a}),d(0)}).catch(t=>{var a,e;return n.notify({type:"negative",message:((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)||t.toString()})})},f=o=>d(o),h=x(()=>Math.ceil(s.listData.total/s.listData.per_page)),D=o=>{const{current_page:t,total:a,per_page:e,data:v}=o;s.listData.current_page=t,s.listData.data=v,s.listData.total=a,s.listData.per_page=e},d=o=>{u.get("media/index",{params:o}).then(t=>{const{message:a,list:e}=t.data;D(e)}).catch(t=>{var a,e;return n.notify({type:"negative",message:((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||t.toString()})}).finally(()=>n.loading.hide())};return k(()=>d(1)),(o,t)=>(p(),Q(w,null,{default:r(()=>[P,l("div",q,[l("div",M,[i(g,{to:{name:"media:upload"},rounded:"",label:"Upload Image",outline:"",color:"primary"}),L]),(p(!0),m(C,null,B(c(s).listData.data,a=>(p(),m("div",{key:a.id,class:"col-6"},[i(V,{src:a.full_path,"no-native-menu":""},{default:r(()=>[i(g,{onClick:e=>_(a),round:"",icon:"delete",class:"absolute all-pointer-events",flat:"",style:{top:"8px",left:"8px"}},null,8,["onClick"])]),_:2},1032,["src"]),l("p",null,S(a==null?void 0:a.thumbnail_path),1)]))),128)),l("div",N,[i(b,{"onUpdate:modelValue":[f,t[0]||(t[0]=a=>c(s).listData.current_page=a)],modelValue:c(s).listData.current_page,max:c(h),input:""},null,8,["modelValue","max"])])])]),_:1}))}};export{Y as default};
